.dashboard {
  --page-horizontal-gap: clamp(1.25rem, 3vw, 2.5rem);
  width: min(100%, clamp(720px, 58vw, 960px));
  max-width: clamp(720px, 58vw, 960px);
  padding: 3rem calc(2rem + var(--page-horizontal-gap));
  box-sizing: border-box;
  font-family: Inter, sans-serif;
  color: var(--color-text-default);
  display: flex;
  flex-direction: column;
  gap: 2rem;
  overflow-x: hidden;
  margin: 0;
  margin-top: 0.78%;
  margin-left: 0;
  margin-right: 0;
}

.dashboard-inner {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

/* Top navigation, Welcome message */
.top-navigation-bar {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 2rem;
  color: var(--color-text-default);
  background: var(--color-dark-gradient);
  padding: 0.5rem 1rem;
  border: 1px solid rgba(58, 58, 58, 1);
  border-radius: 20px;
  width: 100%;
  justify-content: center;
  flex-wrap: nowrap;
  box-sizing: border-box;
  overflow: hidden;
}

.user-name {
  color: var(--color-primary);
}

.section-title {
  font-weight: 500;
  font-size: 1.8rem;
  margin-bottom: 2rem;
}

/* Korttien container */
.games-grid {
  display: grid;
  padding: 1.5rem;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 2rem;
  width: 100%;
  max-width: 100%;
  background: var(--color-dark-gradient);
  max-height: calc(var(--viewport-height) * 0.8);
  overflow-y: auto;
  border: 1px solid rgba(58, 58, 58, 1);
  border-radius: 20px;
  box-sizing: border-box;
}

/* Kortti */
/* Dashboard card host: make each card a non-shrinking inline-flex item so
   horizontal scrolling keeps cards from collapsing/overlapping. The inner
   .card element controls actual width. */
app-dashboard-card {
  display: inline-flex;
  flex: 0 0 auto;
  align-items: stretch;
  justify-content: center;
  padding: 0;
  margin: 0;
}

app-dashboard-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.badge {
  position: absolute;
  top: -5px;
  right: -5px;
  background: var(--color-primary);
  color: var(--color-text-default);
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  font-weight: bold;
}

@media (max-width: 900px) {
  .dashboard {
    padding: 2.5rem calc(1.75rem + var(--page-horizontal-gap));
  }
}

@media (max-width: 700px) {
  .games-grid {
    max-height: none;
    overflow-y: visible;
  }
}

@media (max-width: 600px) {
  .dashboard {
    --page-horizontal-gap: clamp(1rem, 6vw, 2rem);
    padding: 2rem calc(1.25rem + var(--page-horizontal-gap));
    margin: 0 auto;
    gap: 1.75rem;
  }

  .games-grid {
    padding: 1rem;
    gap: 1.25rem;
  }

  .top-navigation-bar {
    text-align: center;
    gap: 0.5rem;
  }
}

.games-row {
  display: flex;
  flex-wrap: nowrap; /* keep all cards in one row */
  gap: 1.2rem; /* spacing between cards - increased to avoid overlapping */
  overflow-x: auto; /* enable horizontal scroll */
  padding: 1rem clamp(1rem, 4vw, 1.5rem); /* breathing room without clipping arrows */
  scroll-padding-inline: clamp(1rem, 4vw, 1.5rem);
  scroll-padding-block: 1rem;
  scroll-behavior: smooth;
  scroll-snap-type: x mandatory; /* snap to cards when scrolling */
  -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  max-width: 100%;
  width: 100%;
}

/* Make each dashboard card snap to start when scrolling */
app-dashboard-card {
  scroll-snap-align: start;
}

/* Make each card visually larger (container) but reduce the image height so
   images look smaller while the card footprint is bigger. Target only cards
   inside the horizontal games rows so other places keep their sizes. */
.games-row ::ng-deep .card {
  /* Responsive card width: scales with viewport but caps at 260px. Using
     clamp avoids raw vw units that can cause page-level overflow. */
  width: clamp(210px, 32vw, 250px) !important;
  min-width: clamp(210px, 32vw, 250px) !important;
  max-width: 260px !important;
  margin: 0.75rem !important;
  box-sizing: border-box !important;
}

.games-row {
  -ms-overflow-style: none; /* IE/Edge */
}

/* Wrapper to hold arrows and the scrollable row */
.games-row-wrap {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  justify-content: center;
  overflow: visible;
}

.games-row-wrap .games-row {
  flex: 1 1 auto;
}

/* Subtle edge fades to hint horizontal scrollability. Kept low-contrast so
   they don't obscure content but make the edges readable. */
.games-row-wrap::before,
.games-row-wrap::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 56px;
  pointer-events: none;
  z-index: 0;
}
.games-row-wrap::before {
  left: 0;
  background: linear-gradient(to right, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0));
  border-top-left-radius: 12px;
  border-bottom-left-radius: 12px;
}
.games-row-wrap::after {
  right: 0;
  background: linear-gradient(to left, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0));
  border-top-right-radius: 12px;
  border-bottom-right-radius: 12px;
}

.scroll-arrow {
  appearance: none;
  border: none;
  background: linear-gradient(
    145deg,
    rgba(24, 29, 40, 0.85),
    rgba(34, 39, 51, 0.75)
  );
  color: transparent;
  width: clamp(42px, 9vw, 52px);
  height: clamp(42px, 9vw, 100px);
  border-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 12;
  padding: 0;
  position: absolute;
  top: 50%;
  overflow: hidden;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.12);
  --scroll-arrow-translate: translate(-65%, -50%);
  transform: var(--scroll-arrow-translate) scale(1);
  transition: transform 160ms ease, background 160ms ease, box-shadow 160ms ease;
  touch-action: manipulation;
}

.scroll-arrow .arrow-icon {
  width: 14px;
  height: 14px;
  border: solid rgba(255, 255, 255, 0.88);
  border-width: 0 2px 2px 0;
  display: inline-block;
  transform: rotate(-45deg);
  transition: transform 160ms ease, border-color 160ms ease;
}

.scroll-arrow.left .arrow-icon {
  transform: rotate(135deg);
}

.scroll-arrow:hover {
  background: linear-gradient(
    145deg,
    rgba(32, 38, 52, 0.92),
    rgba(44, 50, 66, 0.82)
  );
  box-shadow: 0 14px 32px rgba(0, 0, 0, 0.45);
}

.scroll-arrow:hover .arrow-icon {
  border-color: rgba(255, 255, 255, 1);
}

.scroll-arrow:active {
  transform: var(--scroll-arrow-translate) scale(0.92);
}

.scroll-arrow.left {
  left: 0;
}

.scroll-arrow.right {
  right: 0;
  --scroll-arrow-translate: translate(65%, -50%);
}

@media (max-width: 600px) {
  .games-row {
    max-width: 100%;
    justify-content: flex-start;
    padding: 1rem clamp(1.25rem, 6vw, 1.75rem);
    scroll-padding-inline: clamp(1.25rem, 6vw, 1.75rem);
    gap: 0.75rem;
  }

  /* On small screens show arrows and overlay them on the carousel */
  .scroll-arrow {
    --scroll-arrow-translate: translate(-60%, -50%);
    transform: var(--scroll-arrow-translate) scale(1);
    width: clamp(48px, 16vw, 64px);
    height: clamp(48px, 16vw, 64px);
    margin: 0;
  }

  .scroll-arrow .arrow-icon {
    width: clamp(18px, 5vw, 22px);
    height: clamp(18px, 5vw, 22px);
  }

  /* On small screens make the horizontal cards nearly full-width inside
     their container without relying on 100vw (which can cause overflow). */
  .games-row ::ng-deep .card {
    width: clamp(210px, 78vw, 250px) !important;
    min-width: clamp(210px, 78vw, 250px) !important;
    max-width: 260px !important;
    margin: 0 auto 1.25rem !important;
  }

  .scroll-arrow.left {
    left: 0;
    --scroll-arrow-translate: translate(-62%, -50%);
  }

  .scroll-arrow.right {
    right: 0;
    --scroll-arrow-translate: translate(62%, -50%);
  }

  .scroll-arrow:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* Make header wrap on very small screens so the greeting doesn't escape
     the container; reduce font-size for small viewports. */
  .top-navigation-bar {
    flex-wrap: wrap;
    font-size: 1.6rem;
    padding: 0.4rem 0.6rem;
  }

  .favorite-games .section-title,
  .popular-games .section-title {
    font-size: 1.45rem;
    white-space: nowrap;
  }

  .games-row-wrap::before,
  .games-row-wrap::after {
    width: 40px;
  }
}

@media (max-width: 1024px) {
  .dashboard {
    margin-right: 0;
  }
}
