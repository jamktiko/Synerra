<div class="notificationsTab">

  <div class="noti-clear">
    <h3 *ngIf="(!messages?.length && !friendRequests?.length)">
      No notifications!
    </h3>
  </div>

  <div class="tabsConts">

    <div class="conts">
      <div *ngIf="messages?.length" class="d-flex align-items-center justify-content-between mb-2">

        <h3 class="noti-heading">Messages</h3>
        <div class="clear-button">
          <app-button label="Mark messages read" size="xsmall" variant="highlight" (click)="markAllAsRead()">
          </app-button>
        </div>
      </div>

      <div class="tab-content" *ngIf="messages?.length">

        <div class="tab-pane">

          <div *ngFor="let msg of messages" class="card mb-2 p-2 text-white">
            <div class="d-flex align-items-center w-100">

              <img [src]="msg.profilePicture || msg.profilePicture" class="acount-icon" />

              <div class="userTextBar flex-grow">
                <strong>{{ msg.senderUsername || msg.senderUsername }}</strong><br />
                <small>{{ msg.content || msg.content }}</small><br />
                <small class="timestamp">{{ msg.timestamp || msg.timestamp | date:'short' }}</small>
              </div>

              <div class="friend-actions">
                <app-button label="Open" size="xsmall" variant="highlight"
                  (click)="userClicked(msg.roomId || msg.roomId)">
                </app-button>
              </div>

            </div>
          </div>

        </div>
      </div>

      <div *ngIf="friendRequests?.length">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <h3 class="noti-heading">Friend Requests</h3>
          <div class="clear-button">
            <app-button label="Clear all requests" size="xsmall" variant="highlight" (click)="markRequestsAsRead()">
            </app-button>
          </div>
        </div>

        <div class="tab-content" *ngIf="safeFriendRequests.length > 0">

          <div class="tab-pane">

            <div *ngFor="let n of friendRequests" class="card mb-2 p-2 text-white">
              <div class="d-flex align-items-center">

                <img [src]="n.senderPicture" class="acount-icon" />

                <div class="userTextBar flex-grow">
                  <strong>{{ n.fromUsername }}</strong><br />
                  <small *ngIf="n.status === 'PENDING'">Sent you a friend request</small>
                  <small *ngIf="n.status === 'ACCEPTED'">accepted your friend request</small>
                  <small *ngIf="n.status === 'DECLINED'">declined your friend request</small>
                </div>

                <div class="actions" *ngIf="n.status === 'PENDING'">
                  <app-button label="Accept" size="xsmall" variant="highlight"
                    (click)="acceptRequest(n.fromUserId); clearRequest(n.fromUserId)">
                  </app-button>
                  <app-button label="Decline" size="xsmall"
                    (click)="declineRequest(n.fromUserId); clearRequest(n.fromUserId)">
                  </app-button>
                </div>

                <div class="friend-actions" *ngIf="n.status === 'ACCEPTED' || n.status === 'DECLINED'">
                  <app-button label="Clear" size="xsmall" variant="highlight" (click)="clearRequest(n.fromUserId)">
                  </app-button>
                </div>

              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>