<div class="filters-container">
  <h2 class="games-heading">Browse Games</h2>
  <div class="input-container">
    <img src="assets/svg/Search_icon.svg" alt="Search" class="search-icon" />
    <input type="text" [formControl]="searchControl" placeholder="Search by game..." />
  </div>
  <div class="filters">
    <div class="category-dropdown" [class.open]="genreDropdownOpen">
      <button type="button" class="category-trigger" (click)="toggleGenreDropdown()"
        [attr.aria-expanded]="genreDropdownOpen">
        <span>{{ selectedGenreLabel }}</span>
        <span class="category-trigger__arrow" aria-hidden="true">â–¾</span>
      </button>

      @if (genreDropdownOpen) {
      <div class="category-dropdown__list" role="listbox">
        @for (genre of genres; track genre.value) {
        <button type="button" class="category-option" [class.is-active]="selectedGenre === genre.value"
          (click)="selectGenre(genre.value)" role="option" [attr.aria-selected]="selectedGenre === genre.value">
          {{ genre.label }}
        </button>
        } @empty {
        <p class="no-genres">No genres available</p>
        }
      </div>
      }


      <select class="category-native" (change)="onGenreChange($event)" id="game-genre" name="game-genre"
        [value]="selectedGenre" aria-hidden="true" tabindex="-1">
        @for (genre of genres; track genre.value) {
        <option [value]="genre.value">
          {{ genre.label }}
        </option>
        }
      </select>
    </div>
    <app-button class="sort-button" [variant]="sortByPopularity ? 'highlight' : 'default'" size="medium"
      [label]="sortByPopularity ? 'Ascending popularity' : 'Decending popularity'" (click)="onToggleSort()"
      [state]="sortByPopularity ? 'active' : undefined" [attr.aria-pressed]="sortByPopularity"
      aria-label="Toggle sort by popularity">
    </app-button>

  </div>
</div>